1. 请介绍一下你这个项目的业务流程？包含的主要模块。
1. 用户注册与登录：新用户通过邮箱进行注册，并设置个人密码。已注册用户可以通过输入账号和密码进行登录，享受平台提供的各项服务。
2. 视频发布与管理：用户在通过身份验证后，可以上传自己的视频内容到平台。平台会对上传的视频进行内容审核，确保视频内容符合平台规范。审核通过后，视频将被发布到平台上，供其他用户观看和互动。
3. 视频观看与互动：用户可以在平台上浏览和搜索自己感兴趣的视频内容，并点击播放进行观看。在观看过程中，用户可以发表弹幕、评论、点赞、收藏等互动行为，与其他用户分享自己的观影感受。
4. 相关推荐与搜索：平台会根据用户的观看历史、点赞、收藏等行为数据，利用Elasticsearch等搜索引擎技术，为用户提供个性化的视频推荐服务。同时，用户也可以通过关键词搜索功能，快速找到自己想要观看的视频内容。
5. 消息通知：当用户发布视频、发表评论或点赞等互动行为时，平台会通过消息通知功能，及时将相关信息推送给相关用户。
2. 项目背景介绍
在当下的社会坏境中，用户对视频平台的需求越来越大，不仅要求平台提供丰富多样的视频内容，还希望拥有流畅、个性化的观看体验。于是我尝试着手开发了一个基于springboot的云视频播放系统，为用户提供一站式的视频观看、发布和互动体验
3. 你在做这个项目中，遇到的最大的难点、或者解决过的最复杂的 Bug 是什么？
难点说业务逻辑，现在写下来 ，理清楚以后，好一点，当时一头雾水，先上传视频，上传信息，上传之后如何利用ffmepg处理视频，审核之后。加上bug，文件格式转换失败，在我java里面显式成功了，没有任何爆红，但是视频编码和格式就是没有变化，视频也不能播放，队友的电脑上无法播放，设备老旧？不支持hevc，难以排查
4. 数据库表是怎么设计的？
主要有视频表，视频发布表，消息表，用户表，用户行为表，视频文件表，评论表
5. 数据表是冗余还是连表？
冗余空间换时间，连表在有索引的情况下不差，数据频繁变化、需要的数据多用连表，只需要一点信息，那冗余好，
6. 你的项目有实际上线么？使用哪种方式进行部署？
7. 自己讲解项目中的背景+遇到的问题+怎么解决的+最后的成果
发布
视频的发布包括两部分，视频文件、视频信息的发布 和 后台审核
视频文件上传
采用的策略是预上传加分P上传的策略，当然我们拿到的是简单按时长分p的文件，还要后续处理。
前端切片，上传第一个p，在redis保存文件名，当前文件大小，文件p数等必要信息，返回给上传的id
正式上传时，不断更新redis中视频信息，超出大小报错。
预上传可以检验文件信息，避免资源浪费
分p上传可以充分利用带宽，并发上传，断点续传，错误重传
redis在预上传阶段，后端可以接收并存储文件的元数据，如文件名、用户ID、分片数量、上传ID等。这些临时文件信息在分片上传过程中是必需的，用于验证每个分片的有效性、跟踪上传进度等。
视频信息上传
文件上传以后，填写基本的视频信息，可以完成上传，这一步除了常规的新发布视频只要。。。以外，还有考虑删除视频（添加到消息队列中所），视频信息修改情况。最后把视频放入视频处理的消息消息队列中。
视频的处理
之前一直都是放在tmp文件中，现在转到video文件夹，先用randomaccessfile这个类对文件合并，利用ffmepg这个开源工具将合并后的文件编码方式转为H264，视频格式转为TS。（ffmepg利用命令行的方式使用，只需要传入参数，比如什么路径下的视频。。从什么格式到什么格式）
审核
审核通过，将视频从发布表复制到正式表，保存到es。
观看和互动
观看
观看去请求m3u8文件，m3u8文件是一个索引，存储了ts视频信息，服务端在响应体中通过IO流写入视频。同时通过消息队列对视频的数据更新，更新播放数量、按天记录视频播放数、更新es播放数量。同时在线人数。
互动
这里使用了策略模式，对点赞，投币，收藏处理，更新es数据，mysql数据，对于投币，类似于秒杀，添加了spring自带事务处理注解，先减少自己的余额，再增加发布者余额的策略，还用了乐观锁思想，维护一个版本号。最后es更新互动信息。
个性化推荐、热点推荐和搜索
主要是使用了es，public class InitRun implements ApplicationRunner项目启动时初始化操作中初始化视频的映射，审核之后把视频数据添加到了es中，搜索就是通过关键字查找，个性化推荐是按照当前播放的视频名称在相关度按照收藏、播放、点赞等不同的排序在视频播放页面的一侧进行展示，热点推荐是按照24小时内视频播放的数量为你推荐热度最高的视频，通过一个24小时有效期的zset、键过期监听器维护。
消息通知
自定义一个注解，内部设置一个行为类型的枚举类（系统消息？评论？点赞？收藏？投币）
切点表达式自然是带了这个注解的方法，上面几个。
定义切面，解析参数值、参数名、行为类型，根据这些值去消息表中插入对应的数据行
消息表的设计 主键id，接收用户id，主体视频id，消息类型，消息是否已读，拓展字段？评论id
